<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>TRF — Transformer + XGBoost Stock Prediction</title>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <meta name="description" content="Transformer + XGBoost pipeline for next-day stock movement with CrewAI decisioning and backtesting." />
  <style>
    :root{
      --bg:#ffffff; --ink:#0f172a; --muted:#475569; --accent:#0ea5e9; --border:#e2e8f0;
      --card:#ffffff; --code:#0b1020; --chip:#eef2ff;
    }
    *{box-sizing:border-box}
    html,body{margin:0;padding:0;background:var(--bg);color:var(--ink);font:16px/1.55 system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,"Helvetica Neue","Noto Sans",Arial,"Apple Color Emoji","Segoe UI Emoji"}
    a{color:var(--accent);text-decoration:none} a:hover{text-decoration:underline}
    .wrap{max-width:1000px;margin:0 auto;padding:32px 20px}
    header{display:grid;gap:8px;margin-bottom:24px}
    h1{margin:0;font-size:clamp(24px,3.5vw,36px);line-height:1.15}
    p.lead{margin:0;color:var(--muted)}
    .section{margin:28px 0;padding:20px;border:1px solid var(--border);border-radius:14px;background:var(--card)}
    h2{margin:0 0 12px 0;font-size:clamp(18px,2.4vw,22px)}
    .grid{display:grid;gap:14px}
    .grid.cols-2{grid-template-columns:repeat(auto-fit,minmax(280px,1fr))}
    .kpi{display:flex;gap:10px;align-items:center}
    .chip{display:inline-block;padding:4px 10px;border-radius:999px;background:var(--chip);font-size:12px}
    table{width:100%;border-collapse:collapse;font-size:14px}
    th,td{padding:10px;border-bottom:1px solid var(--border);vertical-align:top}
    th{text-align:left;color:var(--muted);font-weight:600}
    tbody tr:hover{background:#fafafa}
    code{background:#f8fafc;border:1px solid var(--border);padding:1px 6px;border-radius:6px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace}
    img{max-width:100%;height:auto;border-radius:12px;border:1px solid var(--border)}
    details{border:1px dashed var(--border);border-radius:12px;padding:14px;background:#fcfcff}
    summary{cursor:pointer;font-weight:600}
    .footer{margin-top:26px;color:var(--muted);font-size:13px}
    .links a{margin-right:12px}
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <h1>TRF — Transformer + XGBoost Stock Prediction</h1>
      <p class="lead">
        Project: end-to-end pipeline that learns temporal features from OHLCV with a Transformer, feeds embeddings to XGBoost to predict next-day movement, requests a CrewAI BUY/SELL/HOLD decision, and validates via backtesting.
      </p>
      <p class="lead">
        My contributions (Sprints 2–4): data ingestion & windowing, Transformer model & embedding extraction, XGBoost training, inference JSON, CrewAI decision integration, backtesting implementation, and integration tests.
      </p>
      <div class="links">
        <a href="https://github.com/ameershaik6667/AI-Agent-Stock-Prediction/tree/ameer-sprint4" target="_blank">Code Repository</a>
        <a href="https://github.com/ameershaik6667/AI-Agent-Stock-Prediction/commits/ameer-sprint4/?author=ameershaik6667" target="_blank">Commits</a>
      </div>
    </header>

    <section class="section">
      <h2>Architecture & Workflow</h2>
      <div class="grid">
        <ul>
          <li><strong>Data</strong>: Fetch OHLCV via <code>yfinance</code>, impute/normalize, create 20-day sliding windows.</li>
          <li><strong>Transformer</strong>: Self-attention encoder → 2-class logits for up/down; export logits as embeddings.</li>
          <li><strong>XGBoost</strong>: Train classifier on Transformer embeddings (grid-searched hyperparams) → <code>xgb_prob</code>.</li>
          <li><strong>Inference</strong>: Return JSON <code>{"date","transformer_score","xgb_prob"}</code>.</li>
        </ul>
        <ul>
          <li><strong>CrewAI</strong>: Map <code>xgb_prob</code> to BUY/SELL/HOLD (threshold rules + prompt logic).</li>
          <li><strong>Backtesting</strong>: Generate daily signals and simulate long/short with transaction costs.</li>
          <li><strong>Outputs</strong>: Console decision record + backtest metrics; charts (equity curve, predictions vs. actuals).</li>
          <li><strong>Perf</strong>: Inference target ≤ 5s/window; secure API calls; no notebooks required.</li>
        </ul>
      </div>
    </section>

    <section class="section">
      <h2>Summary of Sprint Objectives</h2>
      <table>
        <thead>
          <tr><th>Sprint</th><th>Objective</th><th>Outcome</th></tr>
        </thead>
        <tbody>
          <tr>
            <td>2</td>
            <td>MVP data → Transformer → embeddings</td>
            <td>Implemented DataHandler, trained Transformer, exported/validated embeddings.</td>
          </tr>
          <tr>
            <td>3</td>
            <td>XGBoost training + end-to-end inference JSON</td>
            <td>Grid-searched XGBoost, saved model, emitted <code>transformer_score</code> & <code>xgb_prob</code>.</td>
          </tr>
          <tr>
            <td>4</td>
            <td>CrewAI decisions + backtesting + integration tests</td>
            <td>Integrated agents, built signals, simulated strategy, printed metrics, added tests.</td>
          </tr>
        </tbody>
      </table>
    </section>

    <section class="section">
      <h2>Key Artifacts</h2>
      <div class="grid cols-2">
        <figure>
          <img src="1.jpg" alt="CrewAI recommendation output (BUY/SELL/HOLD)">
          <figcaption>CrewAI decision JSON (inference). File: <code>1.jpg</code></figcaption>
        </figure>
        <figure>
          <img src="2.jpg" alt="Backtest results summary and equity curve">
          <figcaption>Backtest summary/metrics. File: <code>2.jpg</code></figcaption>
        </figure>
      </div>
    </section>

    <section class="section">
      <h2>Commits (Authored)</h2>
      <table>
        <thead>
          <tr><th>Date</th><th>SHA</th><th>Description</th><th>User Story</th><th>Task(s)</th></tr>
        </thead>
        <tbody>
          <!-- Sprint 2 -->
          <tr>
            <td>2025-06-22</td>
            <td><a target="_blank" href="https://github.com/ameershaik6667/AI-Agent-Stock-Prediction/commit/a273bab868b6cad3bb731115ee041b77371e7996">a273bab</a></td>
            <td>Adding Transformer model implementation and Embedding extraction</td>
            <td>TRF #720</td>
            <td>TRF.1, TRF.2</td>
          </tr>
          <tr>
            <td>2025-06-22</td>
            <td><a target="_blank" href="https://github.com/ameershaik6667/AI-Agent-Stock-Prediction/commit/1e0cd4847e7f8f6a48ea333986438718ef3763f0">1e0cd48</a></td>
            <td>Adding embeddings</td>
            <td>TRF #720</td>
            <td>TRF.3</td>
          </tr>
          <!-- Sprint 3 -->
          <tr>
            <td>2025-07-13</td>
            <td><a target="_blank" href="https://github.com/ameershaik6667/AI-Agent-Stock-Prediction/commit/957bbaf51bf08e55ca9b0ddc9ca809cc8d2dd037">957bbaf</a></td>
            <td>TRF.4 and TRF.5 Add XGBoost training and end-to-end inference pipeline</td>
            <td>TRF #720</td>
            <td>TRF.4, TRF.5</td>
          </tr>
          <!-- Sprint 4 -->
          <tr>
            <td>2025-08-09</td>
            <td><a target="_blank" href="https://github.com/ameershaik6667/AI-Agent-Stock-Prediction/commit/68414d3ffaae33cbdb801a656a2ceb1760afd1a2">68414d3</a></td>
            <td>TRF Crew AI agents integrated</td>
            <td>TRF #720</td>
            <td>TRF.6</td>
          </tr>
          <tr>
            <td>2025-08-09</td>
            <td><a target="_blank" href="https://github.com/ameershaik6667/AI-Agent-Stock-Prediction/commit/7387bd6b1e6f76c7a62d943d9c0484d141537720">7387bd6</a></td>
            <td>Add comments to the main code</td>
            <td>TRF #720</td>
            <td>TRF.6</td>
          </tr>
          <tr>
            <td>2025-08-09</td>
            <td><a target="_blank" href="https://github.com/ameershaik6667/AI-Agent-Stock-Prediction/commit/80639fa863e5f99b57a4773a5f0ed5cb1325bd31">80639fa</a></td>
            <td>Adding TRF backtesting file</td>
            <td>TRF #720</td>
            <td>TRF.7, TRF.9</td>
          </tr>
        </tbody>
      </table>
      <p class="footer">Full commit history is also available via the repository “Commits” link above.</p>
    </section>

    <section class="section">
      <h2>How to Run (High-Level)</h2>
      <ol>
        <li>Create a Python env; install deps: <code>pandas</code>, <code>numpy</code>, <code>yfinance</code>, <code>torch</code>, <code>xgboost</code>, <code>scikit-learn</code>, <code>joblib</code>, and <code>crewai</code>/<code>langchain_openai</code>.</li>
        <li>Train Transformer on 20-day windows; export logits as embeddings CSV; train/save XGBoost.</li>
        <li>Run inference: outputs <code>{"date","transformer_score","xgb_prob"}</code> and a CrewAI recommendation.</li>
        <li>Run backtesting script to print Sharpe, total return, drawdown; view screenshots (1.jpg, 2.jpg) for sample outputs.</li>
      </ol>
    </section>

    <section class="section">
      <h2>Appendix (for reviewers who want details)</h2>
      <details>
        <summary>TRF User Story (scope & acceptance criteria)</summary>
        <p>This project ingests OHLCV, trains a Transformer, extracts embeddings for XGBoost, emits an inference JSON, maps to BUY/SELL/HOLD via CrewAI, and backtests with metrics/visualizations. Acceptance covers clean data windowing, model convergence, correct embedding export, improved accuracy from XGBoost vs. baseline, ≤5s inference, correct decision mapping, and validated backtesting outputs.</p>
        <p>Artifacts in code: <em>UI transformer/inference modules</em>, <em>embedding CSV</em>, <em>XGBoost model</em>, <em>CrewAI decision agent</em>, and <em>backtest script</em>.</p>
      </details>
    </section>

    <p class="footer">© 2025 • TRF — built as part of AI-Agent-Stock-Prediction.</p>
  </div>
</body>
</html>

